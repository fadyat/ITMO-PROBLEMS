# lab-2. Codegen

## Glossary

- HTTP-сервер — приложение, которое умеет обрабатывать обращения посредством HTTP-запросов.
- HTTP-клиент — набор моделей и методов, которые позволяют взаимодействовать с HTTP-сервером.

## Theory

- [roslyn/source-generators.md at main · dotnet/roslyn · GitHub](https://github.com/dotnet/roslyn/blob/main/docs/features/source-generators.md)
- [roslyn/source-generators.cookbook.md at main · dotnet/roslyn · GitHub](https://github.com/dotnet/roslyn/blob/main/docs/features/source-generators.cookbook.md#use-functionality-from-nuget-packages)
- Генерация HTTP-клиентов - [Swagger Documentation](https://swagger.io/docs/open-source-tools/swagger-codegen/)

Цель: используя инструмент Source Generator написать программу, которая генерирует HTTP-клиент для сервера написанного на другом языке.

## Задание

1. Написать HTTP-сервер, которые предоставляет несколько методов (в качестве примера, можно взять 2-3 лабораторные второго подпотока). Рекомендуемый язык - Java ввиду простоты поднятия и прочего. Можно использовать любой другой (лучше заранее согласовать). Примеры необходимого функционала:
    - GET, POST запросы
    - Запросы с аргументами в Query, в Body
    - Сложные модели с Response (не примитивы, хотя бы классы с полями)
    - Аргументы, которые являются коллекциями, респонсы, которые коллекции содержат
2. Написать упрощённый парсер (на C#) для этого сервера, чтобы можно было получить семантическую модель (можно использовать любые библиотеки для этого), а именно:
    - Описание методов из API - url, список аргументов, возвращаемое значение
    - Модели, которые используются в реквестах и респонсах
3. Используя Source Generator реализовать генерацию HTTP-клиента для данного сервера. Для API должны генерироваться все нужные модели, методы. Можно посмотреть на Swager codegen, примеры его работы и результат его генерации.

На защите нужно продемонстрировать написанные сервер и генератор, генерацию методов и моделей, инкрементальную генерацию (если реализовано).

В отчёте нужно описать:

- алгоритм получения семантической модели HTTP
- как представлена метаинформация о сервере во время генерации
- алгоритм работы Source Generator

## Дополнительные задания (не обязательные)

1. Должна быть реализована возможность инкрементально сгенерировать обновления.
2. Сделать генерацию клиента из C# сервера используя Roslyn API. Провести сравнение и анализ разницы между подходами.